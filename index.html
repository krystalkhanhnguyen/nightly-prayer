<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Kindle - L·ªùi Ch√∫a H·∫±ng Ng√†y</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff;
      color: #333;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      color: #4b2a77;
    }
    section {
      margin-bottom: 2rem;
    }
    .label {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    .block {
      background: #f7f7f7;
      padding: 1rem;
      border: 1px solid #ccc;
      white-space: pre-wrap;
    }
    button {
      background: #b39ddb;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 0.5rem;
    }
    button:hover {
      background: #9e86ca;
    }
  </style>
</head>
<body>
  <h1>üå∏ Kindle - L·ªùi Ch√∫a H·∫±ng Ng√†y</h1>

  <section>
    <div class="label">üìø M·∫ßu nhi·ªám M√¢n C√¥i h√¥m nay:</div>
    <div class="block" id="rosaryBlock">ƒêang t·∫£i...</div>
    <button onclick="copySection('rosaryBlock')">üìã Sao ch√©p M·∫ßu nhi·ªám</button>
  </section>

  <section>
    <div class="label">üìñ B√†i Tin M·ª´ng h√¥m nay:</div>
    <div class="block" id="gospelBlock">ƒêang t·∫£i...</div>
    <button onclick="copySection('gospelBlock')">üìã Sao ch√©p Tin M·ª´ng</button>
  </section>

  <section>
    <div class="label">üìù Suy Ni·ªám h√¥m nay:</div>
    <div class="block" id="reflectionBlock">ƒêang t·∫£i...</div>
    <button onclick="copySection('reflectionBlock')">üìã Sao ch√©p Suy Ni·ªám</button>
  </section>

  <script>
    function getTodayMysteries() {
      const days = ["Ch·ªß Nh·∫≠t", "Th·ª© Hai", "Th·ª© Ba", "Th·ª© T∆∞", "Th·ª© NƒÉm", "Th·ª© S√°u", "Th·ª© B·∫£y"];
      const mysteries = {
        "Th·ª© Hai": [
          "Th·ª© nh·∫•t: Thi√™n Th·∫ßn truy·ªÅn tin cho ƒê·ª©c B√† ch·ªãu thai. Ta h√£y xin cho ƒë∆∞·ª£c ·ªü khi√™m nh∆∞·ªùng.",
          "Th·ª© hai: ƒê·ª©c B√† ƒëi vi·∫øng B√† th√°nh Isave. Ta h√£y xin cho ƒë∆∞·ª£c l√≤ng y√™u ng∆∞·ªùi.",
          "Th·ª© ba: ƒê·ª©c B√† sinh ƒê·ª©c Ch√∫a Gi√™su n∆°i hang ƒë√°. Ta h√£y xin cho ƒë∆∞·ª£c l√≤ng kh√≥ khƒÉn.",
          "Th·ª© t∆∞: ƒê·ª©c B√† d√¢ng ƒê·ª©c Ch√∫a Gi√™su trong ƒë·ªÅn th√°nh. Ta h√£y xin cho ƒë∆∞·ª£c v√¢ng l·ªùi ch·ªãu l·ª•y.",
          "Th·ª© nƒÉm: ƒê·ª©c B√† t√¨m ƒë∆∞·ª£c ƒê·ª©c Ch√∫a Gi√™su trong ƒë·ªÅn th√°nh. Ta h√£y xin cho ƒë∆∞·ª£c gi·ªØ nghƒ©a c√πng Ch√∫a lu√¥n."
        ],
        "Th·ª© Ba": [
          "Th·ª© nh·∫•t: ƒê·ª©c Ch√∫a Gi√™su ch·ªãu ph√©p R·ª≠a t·∫°i s√¥ng Gioƒëan. Ta h√£y xin cho ƒë∆∞·ª£c s·ªëng x·ª©ng ƒë√°ng l√† con c√°i Ch√∫a.",
          "Th·ª© hai: ƒê·ª©c Ch√∫a Gi√™su l√†m ph√©p l·∫° t·∫°i ti·ªác c∆∞·ªõi Cana. Ta h√£y xin cho ƒë∆∞·ª£c v·ªØng tin v√†o quy·ªÅn nƒÉng c·ªßa Ng√†i.",
          "Th·ª© ba: ƒê·ª©c Ch√∫a Gi√™su rao gi·∫£ng N∆∞·ªõc Tr·ªùi v√† k√™u g·ªçi s√°m h·ªëi. Ta h√£y xin cho ƒë∆∞·ª£c ho√°n c·∫£i v√† tin v√†o Tin M·ª´ng.",
          "Th·ª© t∆∞: ƒê·ª©c Ch√∫a Gi√™su bi·∫øn h√¨nh tr√™n n√∫i. Ta h√£y xin cho ƒë∆∞·ª£c l·∫Øng nghe v√† th·ª±c h√†nh l·ªùi Ch√∫a.",
          "Th·ª© nƒÉm: ƒê·ª©c Ch√∫a Gi√™su l·∫≠p b√≠ t√≠ch Th√°nh Th·ªÉ. Ta h√£y xin cho ƒë∆∞·ª£c si√™ng nƒÉng r∆∞·ªõc l·ªÖ."
        ],
        "Th·ª© T∆∞": [
          "Th·ª© nh·∫•t: ƒê·ª©c Ch√∫a Gi√™su lo bu·ªìn ƒë·ªï m·ªì h√¥i m√°u. Ta h√£y xin cho ƒë∆∞·ª£c ƒÉn nƒÉn t·ªôi n√™n.",
          "Th·ª© hai: ƒê·ª©c Ch√∫a Gi√™su ch·ªãu ƒë√°nh ƒë√≤n. Ta h√£y xin cho ƒë∆∞·ª£c h√£m m√¨nh ch·ªãu kh√≥ b·∫±ng l√≤ng.",
          "Th·ª© ba: ƒê·ª©c Ch√∫a Gi√™su ch·ªãu ƒë·ªôi m√£o gai. Ta h√£y xin cho ƒë∆∞·ª£c ch·ªãu m·ªçi s·ª± s·ªâ nh·ª•c b·∫±ng l√≤ng.",
          "Th·ª© t∆∞: ƒê·ª©c Ch√∫a Gi√™su v√°c c√¢y Th√°nh Gi√°. Ta h√£y xin cho ƒë∆∞·ª£c v√°c Th√°nh Gi√° theo ch√¢n Ch√∫a.",
          "Th·ª© nƒÉm: ƒê·ª©c Ch√∫a Gi√™su ch·ªãu ch·∫øt tr√™n Th√°nh Gi√°. Ta h√£y xin cho ƒë∆∞·ª£c ƒë√≥ng ƒëinh t√≠nh x√°c th·ªãt v√†o Th√°nh Gi√° Ch√∫a."
        ],
        "Th·ª© NƒÉm": [
          "Th·ª© nh·∫•t: ƒê·ª©c Ch√∫a Gi√™su s·ªëng l·∫°i. Ta h√£y xin cho ƒë∆∞·ª£c s·ªëng l·∫°i th·∫≠t v·ªÅ ph·∫ßn linh h·ªìn.",
          "Th·ª© hai: ƒê·ª©c Ch√∫a Gi√™su l√™n tr·ªùi. Ta h√£y xin cho ƒë∆∞·ª£c √°i m·ªô nh·ªØng s·ª± tr√™n tr·ªùi.",
          "Th·ª© ba: ƒê·ª©c Ch√∫a Th√°nh Th·∫ßn hi·ªán xu·ªëng. Ta h√£y xin cho ƒë∆∞·ª£c l√≤ng ƒë·∫ßy d·∫´y m·ªçi ∆°n ƒê·ª©c Th√°nh Th·∫ßn.",
          "Th·ª© t∆∞: ƒê·ª©c M·∫π l√™n tr·ªùi. Ta h√£y xin ∆°n ch·∫øt l√†nh trong tay ƒê·ª©c M·∫π.",
          "Th·ª© nƒÉm: ƒê·ª©c M·∫π ƒë∆∞·ª£c ƒë·ªôi m√£o tr√™n tr·ªùi. Ta h√£y xin ∆°n trung th√†nh v·ªõi M·∫π ƒë·∫øn tr·ªçn ƒë·ªùi."
        ]
      };
      const today = new Date();
      let dow = days[today.getDay()];
      if (dow === "Ch·ªß Nh·∫≠t") dow = "Th·ª© NƒÉm";
      const todaysMysteries = mysteries[dow] || [];
      const randomMystery = todaysMysteries[Math.floor(Math.random() * todaysMysteries.length)] || "[Kh√¥ng c√≥ d·ªØ li·ªáu]";
      document.getElementById("rosaryBlock").textContent = randomMystery;
    }

    function copySection(id) {
      const text = document.getElementById(id).textContent;
      navigator.clipboard.writeText(text)
        .then(() => alert("üìã ƒê√£ sao ch√©p m·ª•c n√†y!"))
        .catch(err => alert("L·ªói khi sao ch√©p: " + err));
    }

    async function fetchViaProxy(targetUrl) {
      const proxy = 'https://api.allorigins.win/get?url=' + encodeURIComponent(targetUrl);
      const res = await fetch(proxy);
      const data = await res.json();
      return data.contents;
    }

    async function fetchGospel() {
      try {
        const today = new Date();
        const y = today.getFullYear();
        const m = String(today.getMonth() + 1).padStart(2, '0');
        const d = String(today.getDate()).padStart(2, '0');
        const url = `https://www.vaticannews.va/vi/loi-chua-hang-ngay/${y}/${m}/${d}.html`;
        const html = await fetchViaProxy(url);
        const citationMatch = html.match(/<h3.*?>(.*?)<\/h3>/);
        const bodyMatch = html.match(/<p class="bible">(.*?)<\/p>/gs);
        const citation = citationMatch ? citationMatch[1] : '[Kh√¥ng r√µ ƒëo·∫°n]';
        const content = bodyMatch ? bodyMatch.map(p => p.replace(/<[^>]*>/g, '').replace(/\d+/g, '')).join('\n') : '[Kh√¥ng l·∫•y ƒë∆∞·ª£c n·ªôi dung]';
        document.getElementById('gospelBlock').textContent = citation + '\n' + content;
      } catch {
        document.getElementById('gospelBlock').textContent = '[L·ªói t·∫£i Tin M·ª´ng]';
      }
    }

    async function fetchReflection() {
      try {
        const url = `https://thanhlinh.net/vi/suy-niem-122`;
        const html = await fetchViaProxy(url);
        const contentMatch = html.match(/<div class="field-item even">([\s\S]+?)<\/div>/);
        const clean = contentMatch ? contentMatch[1].replace(/<[^>]+>/g, '') : '[Kh√¥ng c√≥ n·ªôi dung]';
        const parts = clean.split(/(Suy ni·ªám:|M·ªùi B·∫°n:|S·ªëng L·ªùi Ch√∫a:|C·∫ßu nguy·ªán:)/).slice(1);
        let result = '';
        for (let i = 0; i < parts.length; i += 2) {
          result += parts[i].trim() + '\n' + parts[i + 1].trim() + '\n\n';
        }
        document.getElementById('reflectionBlock').textContent = result.trim();
      } catch {
        document.getElementById('reflectionBlock').textContent = '[L·ªói t·∫£i Suy Ni·ªám]';
      }
    }

    getTodayMysteries();
    fetchGospel();
    fetchReflection();
  </script>
</body>
</html>
